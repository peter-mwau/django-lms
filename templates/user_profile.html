{% extends 'base.html' %}
{% load static tailwind_tags %}
{% load static %}





{% block title %}
    LMS - Profile
{% endblock title %}
    

{% block body_content %}
    <div class="lg:mt-[150px] lg:m-2 mt-[120px] lg:ml-[470px] lg:w-[57%] w-auto absolute lg:relative left-2 text-cyan-950 font-serif bg-transparent overflow-auto lg:h-auto h-auto">
        {% if user.is_authenticated %}
        {% if user.profile.picture %}
        <img src="{{ user.profile.picture.url }}" alt="User Picture" class="rounded-full h-[100px] mb-4">
        
        {% else %}
            <i class="fa fa-user-circle-o fa-5x" aria-hidden="true"></i>
        {% endif %}
            {% comment %} <p>{{ user.}}</p> {% endcomment %}
            <h1 class="text-3xl font-semibold">Username: {{user.username}}</h1>
            <h4 class="text-xl font-semibold">First Name: {{user.first_name}}</h4>
            <h4 class="text-xl font-semibold">Last Name: {{user.last_name}}</h4>
            
            <h4 class="text-xl font-semibold">Type: 
            {% if user.user_type == 1 %}
                Student
            {% else %}
                Teacher                
            {% endif %}
            </h4>
            <h5 class="text-xl font-semibold">Email: {{user.email}}</h5>
        
            {% if user.user_type == 2 %}
            {% comment %} <h3 class="font-sans text-2xl mt-5">Created Courses</h3> {% endcomment %}
                <div class="card-deck">
                {% for course in course_list %}
                    
                    {% if course.teacher.id == user.id %}
                        <div class="bg-white bg-opacity-40 m-2 shadow-lg rounded-md" style="width: 20rem">
                            <div class="card-image">
                                <!-- Place your image here -->
                                {% comment %} <img src="{% static 'django_lms/images/web5.jpg' %}" alt="Course Image" class="w-full h-50 object-cover rounded-t-md" /> --> {% endcomment %}
                                {% if course.picture %}

                                <img src="{{ course.picture.url }}" alt="{{ course.course_name }}" class="card-img-top">
                                {% else %}
                                <!-- Default image or placeholder if no picture is available -->
                                <img src="{% static 'django_lms/images/web5.jpg' %}" alt="Default Image" class="card-img-top">
                                {% endif %}
                            </div>
                            <div class="card-body p-4">
                            

                            <h5 class="card-title">{{course.course_name}}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">{{course.teacher}}</h6>
                            {% comment %} <p class="card-text">
                                {{course.course_description}}
                            </p> {% endcomment %}
                            <a href="{% url 'courses:detail' pk=course.pk %}" 
                            class="bg-blue-950 text-white m-2 p-2 hover:bg-yellow-400 rounded-md text-md font-extrabold hover:no-underline">More Info</a>
                            <p class="m-2">{{course.students.count}}
                                    member{{course.students.count|pluralize}}</p>
                            </div>
                        </div>
                    {% endif %}
                
                {% empty %}
                    <div class="jumbotron">
                        You have not created any courses yet.
                    </div>
                {% endfor %}
                </div>
            {% elif user.user_type == 1 %}
            <h3 class="font-sans text-2xl mt-5">Enrolled Courses</h3>
            <div class="card-deck">
                {% for course in course_list %}
                    
                    {% if user in course.students.all %}
                    <div class="bg-black bg-opacity-40 m-2 shadow-md rounded-md" style="width: 20rem">
                        <div class="card-image">
                          <!-- Place your image here -->
                          <img src="{% static 'django_lms/images/landing12.jpg' %}" alt="Course Image" class="w-full h-50 object-cover rounded-t-md" />
                        </div>
                        <div class="card-body p-4">
                          <h5 class="card-title">{{course.course_name}}</h5>
                          <h6 class="card-subtitle mb-2 text-muted">{{course.teacher}}</h6>
                          {% comment %} <p class="card-text">
                            {{course.course_description}}
                          </p> {% endcomment %}
                          <a href="{% url 'courses:detail' pk=course.pk %}" class="bg-blue-950 text-white m-2 p-2 hover:bg-yellow-400 rounded-md text-md font-extrabold hover:no-underline">More Info</a>
                          <a href="{% url 'courses:unenroll' pk=course.pk %}" class="bg-red-600 m-2 text-white hover:bg-red-800 p-2 rounded-md text-md font-extrabold hover:no-underline">Unenroll</a>
                          <p class="m-2">{{course.students.count}} member{{course.students.count|pluralize}}</p>
                        </div>
                      </div>
                      
                    {% endif %}
               
                {% empty %}
                    <div class="jumbotron">
                        You have not enrolled in any courses yet.
                    </div>
                {% endfor %}
            </div>
            {% if user.user_type == 1 and user.is_authenticated %}
            <!-- New section for completed courses -->
            <h3 class="font-sans text-2xl text-cyan-950 mt-5">My Achievements</h3>
            <p>Debug: Completed Courses Exist</p>
            {% for completed_course in completed_courses %}
                <p class="text-cyan-950 text-xl">{{ completed_course.course_name }}</p>
            {% endfor %}
            <p>Debug: Total Completed Courses: {{ completed_courses|length }}</p>
        {% endif %}
        




            {% endif %}
        {% else %}
            <div class="jumbotron">
                You cannot access this profile.
            </div>
        {% endif %}

    </div>
{% endblock body_content %}
    